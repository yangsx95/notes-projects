<html>
  <head>
    <meta charset="UTF-8">
    <title>3. Day03 - Gaiden</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css\bootstrap.min.css">
    <link rel="stylesheet" href="css\font-awesome.min.css">
    <link rel="stylesheet" href="css\highlight.css">
    <link rel="stylesheet" href="css\style.css">
    <link rel="stylesheet" href="css\my.css">
  </head>
  <body>
    <div class="wrapper">
      <div class="header">
        <i class="fa fa-bars sidebar-toggle"></i>
        <span class="title"><a href="Day01.html">Gaiden</a></span>
      </div>
      <div class="sidebar">
        <ul>
          <li class="numbered visible">
            <a href="Day01.html" data-alt-hash="day01"><span class="number">1.</span>Day01</a>
            <ul>
              <li class="numbered visible">
                <a href="Day01.html#id-7162f5a11c8e3a956d9aa4ee917bff96000fbc98"><span class="number">1.1.</span>任务详细说明</a>
                <ul>
                  <li class="numbered visible"><a href="Day01.html#mvc"><span class="number">1.1.1.</span>创建项目按照MVC的架构模式创建相应的包结构如下图：</a></li>
                  <li class="numbered visible"><a href="Day01.html#pomxml"><span class="number">1.1.2.</span>pom.xml的依赖配置：</a></li>
                  <li class="numbered visible"><a href="Day01.html#hibernatehibernatecfgxml"><span class="number">1.1.3.</span>配置hibernate的主配置文件:hibernate.cfg.xml</a></li>
                  <li class="numbered visible"><a href="Day01.html#hibernate"><span class="number">1.1.4.</span>根据分析创建实体，并做hibernate的映射，根据需求文档的物理设计</a></li>
                  <li class="numbered visible"><a href="Day01.html#hibernatesession"><span class="number">1.1.5.</span>hibernate的session工具类</a></li>
                  <li class="numbered visible"><a href="Day01.html#id-95d0a5f0a237ffc3bd210b185d1403a7d5bd0b0b"><span class="number">1.1.6.</span>通过过滤器设置请求和回应编码以及权限控制</a></li>
                  <li class="numbered visible"><a href="Day01.html#bean"><span class="number">1.1.7.</span>为了解除各层之间的耦合性，提供一个bean工厂，来实现解耦合，</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="Day02.html" data-alt-hash="day02"><span class="number">2.</span>Day02</a>
            <ul>
              <li class="numbered visible">
                <a href="Day02.html#id-af156bad56b1c2a8dd04f104684a49eb3d4746d7"><span class="number">2.1.</span>任务详情说明</a>
                <ul>
                  <li class="numbered visible"><a href="Day02.html#id-d4579bbd2acc523dc6247c6313a2eb938ed40b41"><span class="number">2.1.1.</span>视图层:</a></li>
                  <li class="numbered visible"><a href="Day02.html#id-16a5af49bb761ed22ec9795aa5db3ab2509b2fb5"><span class="number">2.1.2.</span>控制层：</a></li>
                  <li class="numbered visible"><a href="Day02.html#id-bd5a39d61fc4d09c931d2b4d375ed25242ae7146"><span class="number">2.1.3.</span>业务层：</a></li>
                  <li class="numbered visible"><a href="Day02.html#id-63f45e92b7c574a974500c309a10d022ad4c2dfc"><span class="number">2.1.4.</span>数据访问层</a></li>
                  <li class="numbered visible"><a href="Day02.html#id-9847283c8e82f7ef2487ee4d3f3e94020aa37b1f"><span class="number">2.1.5.</span>商品首页的显示</a></li>
                  <li class="numbered visible"><a href="Day02.html#id-07cce4c07eab88c6b2d963af79a17ab00acd87cb"><span class="number">2.1.6.</span>图书的分类查询：</a></li>
                  <li class="numbered visible"><a href="Day02.html#id-1e90f40b7b77f956fa693e906060db7af1e670c8"><span class="number">2.1.7.</span>商品详情页：</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="Day03.html" data-alt-hash="day03"><span class="number">3.</span>Day03</a>
            <ul>
              <li class="numbered visible">
                <a href="Day03.html#id-914140ee94022822a51225fd8f39e9a54d6f79e5"><span class="number">3.1.</span>任务详情说明</a>
                <ul>
                  <li class="numbered visible"><a href="Day03.html#id-2a7ae62eb10734335d176e0235a52d41b1fab0fc"><span class="number">3.1.1.</span>功能设计</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="Day04.html" data-alt-hash="day04"><span class="number">4.</span>Day04</a>
            <ul>
              <li class="numbered visible">
                <a href="Day04.html#id-a1f28bf4e37b3b38d040c0438a82b4adb42e90a9"><span class="number">4.1.</span>任务详情说明</a>
                <ul>
                  <li class="numbered visible">
                    <a href="Day04.html#id-eebd10b9ea0ed96f1e7f9d66f2d9ddaefcabea4e"><span class="number">4.1.1.</span>功能设计</a>
                    <ul>
                      <li class="numbered invisible">
                        <a href="Day04.html#id-e1703107bce8a40037a8f02bf904265ad6136b82"><span class="number">4.1.1.1.</span>后台服务程序处理：</a>
                        <ul>
                          <li class="unnumbered invisible"><a href="Day04.html#id-db1624598f0a892a82cf7a24b3c9dd669a25f64c">购物车页面如下：</a></li>
                          <li class="unnumbered invisible"><a href="Day04.html#id-ce7b674841625c853dd4a98d8722a6d85252eaa0">购物车业务层接口定义：</a></li>
                          <li class="unnumbered invisible"><a href="Day04.html#id-3c7430c3a8cbc9fa43438c6534596d71a20c6c32">参考实现：</a></li>
                          <li class="unnumbered invisible"><a href="Day04.html#id-641946fb95fb38bf7525d2d10ec27e3ee682dddf">控制层：</a></li>
                          <li class="unnumbered invisible"><a href="Day04.html#jsp">JSP页面</a></li>
                          <li class="unnumbered invisible"><a href="Day04.html#id-ed6c5112aa07b28edbeee6bdd8d145ec6455b893">页面视图展示：</a></li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="Day05.html" data-alt-hash="day05"><span class="number">5.</span>Day05</a>
            <ul>
              <li class="numbered visible">
                <a href="Day05.html#id-5053eee6be99caad723b2f22524c1e2addfee6e9"><span class="number">5.1.</span>任务详细说明：</a>
                <ul>
                  <li class="numbered visible"><a href="Day05.html#id-2a4b9f847b652c5d8aed18c9d80398b917dab9c7"><span class="number">5.1.1.</span>功能设计</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="Day06.html" data-alt-hash="day06"><span class="number">6.</span>Day06</a>
            <ul>
              <li class="numbered visible">
                <a href="Day06.html#id-8de5978d4021ae9620176dbd1451f544ff8f798e"><span class="number">6.1.</span>任务单详细说明：</a>
                <ul>
                  <li class="numbered visible"><a href="Day06.html#id-4c4580cc53ffa82ec1a481ce14f72537efb100ee"><span class="number">6.1.1.</span>功能设计</a></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="content">
        <div class="content-handle"></div>
        <div class="content-container">
          <div class="content-nav content-nav-top">
            <a class="prev-page" href="Day02.html">
            <i class="fa fa-angle-left"></i>
            <span class="number">2.</span>
            Day02
            </a>
            <a class="next-page" href="Day04.html">
            <span class="number">4.</span>
            Day04
            <i class="fa fa-angle-right"></i>
            </a>
          </div>
          <div class="page-toc">
            <ul>
              <li class="numbered visible">
                <a href="#day03"><span class="number">3.</span>Day03</a>
                <ul>
                  <li class="numbered visible">
                    <a href="#id-914140ee94022822a51225fd8f39e9a54d6f79e5"><span class="number">3.1.</span>任务详情说明</a>
                    <ul>
                      <li class="numbered visible"><a href="#id-2a7ae62eb10734335d176e0235a52d41b1fab0fc"><span class="number">3.1.1.</span>功能设计</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
          <div class="main-content">
            <h1 id="day03"><span class="number">3.</span>Day03</h1>
            <h2 id="id-914140ee94022822a51225fd8f39e9a54d6f79e5"><span class="number">3.1.</span>任务详情说明</h2>
            <h3 id="id-2a7ae62eb10734335d176e0235a52d41b1fab0fc"><span class="number">3.1.1.</span>功能设计</h3>
            <p>此任务单完成用户模块的功能开发，包括用户的登录、注册、注销 整体的功能的层次机构如下：</br> 视图层JSP：</br>  <span style="color:red">注：登录和注册是通过bootstrap来编写的，都在index主页上，如下图：</span></br>  <img src="../img/209.png" alt="登录"/>  <img src="../img/210.png" alt="注册"/></p>
            <p>控制层控制器：</br> <img src="../img/211.png" alt="控制层"/></p>
            <p>UserAction.java：用户的控制器</p>
            <p><span style="color:red">注：与以前的任务单一样，我们不限定各位开发控制器的个数和模式，你们完全可以自定义已上的各个类型，或只写一个Action也行【你的项目，你做主】</span></br></p>
            <p>业务接口：</p>
            <pre><code class="java">public interface IUserService {
    /**
	 * 验证用户是否合法
	 * @param name 用户名
 	 * @param pwd  密码
	 * @return
	 */
	User login(String name, String pwd) throws LoginException;
	/**
	 * 完成用户的注册功能
	 * @param user
	 */
	void register(User user);
	/*****
	 * 验证某个用户名是否可用， 如果可用，则返回true, 否则，返回false
	 * @param name
	 * @return
	 */
	boolean validate(String name);
	/*****
	 * 添加地址
	 * @param a
	 */
	void addAddress(Address a);
	/******
	 * 删除地址
	 * @param a
	 */
	void delAddress(Address a);
	
	/*****
	 * 更新指定的地址信息
	 * @param a
	 */
	void updAddress(Address a);
	
	/****
	 * 根据用户查询此用户的所有地址
	 * @param user
	 * @return
	 */
	List&lt;Address&gt; getAddressByUser(User user);
	
	/*****
	 * 按主键查询地址
	 * @param id
	 * @return
	 */
	Address getAddrById(Long id);
}
</code></pre>
            <p>数据访问层接口：</p>
            <pre><code class="java">public interface IUserDao {
    /**
	 * 根据用户名查询用户
	 * 
	 * @param userName
	 * @return
	 */
	public User selectByName(String userName);

	/**
	 * 保存用户对象
	 * 
	 * @param user
	 */
	public void save(User user);

	/*****
	 * 更新用户
	 * 
	 * @param user
	 */
	public void update(User user);
}

public interface IAddressDao {
    /**********
	 * 保存地址
	 * @param a
	 */
	void save(Address a);
	/****
	 * 获取指定用户id的所有地址
	 * @return
	 */
	List&lt;Address&gt; findByUserId(Long userId);
	/****
	 * 删除某个地址
	 * @param a
	 */
	void delete(Address a);
	/*****
	 * 依ID查询
	 * @param id
	 * @return
	 */
	Address findById(Long id);
	/****
	 * 更新地址
	 * @param a
	 */
	void update(Address a);
}

</code></pre>
            <p><span style="color:red">注：此业务汉两个Dao，每个Dao只关注自己的GRUD 操作，在业务层方面进行整合。</span></br></p>
            <p>用户注册:</br> <img src="../img/210.png" alt="用户注册"/></p>
            <p>在录入玩用户名之后，有一个失去焦点事件，在此事件上，利用ajax请求服务程序 某个Action中的某个验证方法来验证用户名是否重复</br></p>
            <p>注册的控制器实现：【<span style="color:red">请自行实现</span>】</br></p>
            <p>注册的业务实现：【<span style="color:red">请自行实现</span>】</br></p>
            <p>JSP实现：【<span style="red">请自行实现</span>】</br></p>
            <p>登录功能：</br> 通过页面导航的登录按钮点击，弹出登录界面</br> <img src="../img/209.png" alt="登录界面"/></p>
            <p>登录的控制器实现：【<span style="color:red">请自行实现</span>】</br></p>
            <p>登录的业务实现：【<span style="color:red">请自行实现</span>】</br></p>
            <p>登录的数据访问实现：【<span style="color:red">请自行实现</span>】</br></p>
            <p>JSP实现：【<span style="color:red">请自行实现</span>】</br></p>
            <p>用户注销：</br> 提供给用户退出登录功能</br> 当用户在登录状态，点击页面的注销，即可退出登录状态：</br> 此功能只需要删除session中的用户对象即可，返回首页</br></p>
            <p>注销的控制器实现：【<span style="color:red">请自行实现</span>】</br></p>
            <p>注销的业务实现：【<span style="color:red">请自行实现</span>】</br></p>
            <p>注销的数据访问实现：【<span style="color:red">请自行实现</span>】</br></p>
            <p>JSP实现：【<span style="color:red">请自行实现</span>】</br></p>
          </div>
          <div class="content-nav content-nav-bottom">
            <a class="prev-page" href="Day02.html">
            <i class="fa fa-angle-left"></i>
            <span class="number">2.</span>
            Day02
            </a>
            <a class="next-page" href="Day04.html">
            <span class="number">4.</span>
            Day04
            <i class="fa fa-angle-right"></i>
            </a>
          </div>
          <div class="footer">
            <p class="credit text-muted">Powered by <a href="https://github.com/kobo/gaiden">Gaiden</a></p>
          </div>
        </div>
      </div>
    </div>
    <script src="js\jquery-2.1.1.min.js"></script>
    <script src="js\highlight.js"></script>
    <script src="js\application.js"></script>
    <script src="js\my.js"></script>
  </body>
</html>
